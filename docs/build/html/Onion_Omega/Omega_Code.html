<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Code on Onion Omega &mdash; Loop Controller and Remote I/O 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How To Format Data for UART" href="../API_Examples/settings_text.html" />
    <link rel="prev" title="Relay and Digital Out Circuits" href="../schematics/relaycircuit.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Loop Controller and Remote I/O
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Schematics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schematics/inputcircuit.html">Input Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/outputcircuit.html">Output Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/ltc2984circuit.html">LTC2984 Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/powercircuit.html">Power Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/relaycircuit.html">Relay and Digital Out Circuits</a></li>
</ul>
<p class="caption"><span class="caption-text">Onion Omega Function</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code on Onion Omega</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#data-structures">Data Structures</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/settings_text.html">How To Format Data for UART</a></li>
</ul>
<p class="caption"><span class="caption-text">API Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/input_ex.html">Input Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/output_ex.html">Output Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/pid_ex.html">PID Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/ltc_ex.html">LTC2984 Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/shift_ex.html">Shift Register Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/uart_ex.html">UART Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/settings_handler.html">Setting Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/in_pid_out.html">Putting It All Together</a></li>
</ul>
<p class="caption"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API_References/inputob.html">Input Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/outputob.html">Output Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/pidob.html">PID Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/ltc.html">LTC2984</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/shift.html">Shift Register</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/uart.html">Uart Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/setting_ob.html">Settings Handler</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Loop Controller and Remote I/O</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Code on Onion Omega</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Onion_Omega/Omega_Code.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="code-on-onion-omega">
<h1>Code on Onion Omega<a class="headerlink" href="#code-on-onion-omega" title="Permalink to this headline">¶</a></h1>
<p>There are two main programs that can be run on the Onion Omega. The first is a simple python script that will send the information located in the settings.txt file. This can be found with the name <a class="reference external" href="https://github.com/jonheyden/Senior/blob/main/Onion/comm.py">comm.py</a> on the repository.</p>
<p>The configuration information can be found in the “How to Format Data for UART” section.</p>
<p>The other program is for CIP control through the ethernet port avaialble on the board. This program will create a CIP link to the targetted controller and start to read/write values based on the values of the PLC. The code can be found with the name <a class="reference external" href="https://github.com/jonheyden/Senior/blob/main/Onion/main_onion.py">main_onion.py</a> on the repository.</p>
<p>This is possible by leveraging the <a class="reference external" href="https://docs.pycomm3.dev/en/latest/">pycomm3 library</a> by ottowayi. The Onion is capable of both python 2 and python 3. In order to use this library, the user must call python3 on the command line. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 main_onion.py
</pre></div>
</div>
<p>The code can be made to run as a background process by adding &amp; to the end of the command. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python3 main_onion.py <span class="p">&amp;</span>
</pre></div>
</div>
<p>This can further be automated by making the program run on boot. For the purpose of this document, we will not cover that but the information can be found at the Onion Omega example site under <a class="reference external" href="https://docs.onion.io/omega2-docs/running-a-command-on-boot.html">running a command on boot</a>.</p>
<p>The code available through github is using a dummy IP, the address will need to be configured by the user. Further, the tags will need to be made available in the PLC by the user, either through an AOI or manually. The program will fail if it can not find the tags at the address expected.</p>
<p>Because of licensing, the PLC code is not included but the structures for the tags can be found <a class="reference internal" href="#data-structures"><span class="std std-ref">below</span></a>.</p>
<p>The first code block is an example of generating the tag names in an array for accessing multiple tags at once.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Generating Tag Names</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Initialization Variables to be set by user</span>
<span class="n">plc_address</span> <span class="o">=</span> <span class="s2">&quot;10.20.30.100&quot;</span>


<span class="n">input_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;input0&#39;</span><span class="p">,</span> <span class="s1">&#39;input1&#39;</span><span class="p">,</span> <span class="s1">&#39;input2&#39;</span><span class="p">,</span> <span class="s1">&#39;input3&#39;</span><span class="p">,</span> <span class="s1">&#39;input4&#39;</span><span class="p">,</span> <span class="s1">&#39;input5&#39;</span><span class="p">,</span> <span class="s1">&#39;input6&#39;</span><span class="p">,</span> <span class="s1">&#39;input7&#39;</span><span class="p">]</span>
<span class="n">output_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;output0&#39;</span><span class="p">,</span> <span class="s1">&#39;output1&#39;</span><span class="p">,</span> <span class="s1">&#39;output2&#39;</span><span class="p">,</span> <span class="s1">&#39;output3&#39;</span><span class="p">,</span> <span class="s1">&#39;output4&#39;</span><span class="p">,</span> <span class="s1">&#39;output5&#39;</span><span class="p">,</span> <span class="s1">&#39;output6&#39;</span><span class="p">,</span> <span class="s1">&#39;output7&#39;</span><span class="p">]</span>
<span class="n">pid_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pid0&#39;</span><span class="p">,</span> <span class="s1">&#39;pid1&#39;</span><span class="p">,</span> <span class="s1">&#39;pid2&#39;</span><span class="p">,</span> <span class="s1">&#39;pid3&#39;</span><span class="p">,</span> <span class="s1">&#39;pid4&#39;</span><span class="p">,</span> <span class="s1">&#39;pid5&#39;</span><span class="p">,</span> <span class="s1">&#39;pid6&#39;</span><span class="p">,</span> <span class="s1">&#39;pid7&#39;</span><span class="p">]</span>
<span class="n">relay_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;relay0&#39;</span><span class="p">,</span> <span class="s1">&#39;relay1&#39;</span><span class="p">,</span> <span class="s1">&#39;relay2&#39;</span><span class="p">,</span> <span class="s1">&#39;relay3&#39;</span><span class="p">,</span> <span class="s1">&#39;relay4&#39;</span><span class="p">,</span> <span class="s1">&#39;relay5&#39;</span><span class="p">,</span> <span class="s1">&#39;relay6&#39;</span><span class="p">,</span> <span class="s1">&#39;relay7&#39;</span><span class="p">]</span>
<span class="n">digital_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;digital0&#39;</span><span class="p">,</span> <span class="s1">&#39;digital1&#39;</span><span class="p">,</span> <span class="s1">&#39;digital2&#39;</span><span class="p">,</span> <span class="s1">&#39;digital3&#39;</span><span class="p">,</span> <span class="s1">&#39;digital4&#39;</span><span class="p">,</span> <span class="s1">&#39;digital5&#39;</span><span class="p">,</span> <span class="s1">&#39;digital6&#39;</span><span class="p">,</span> <span class="s1">&#39;digital7&#39;</span><span class="p">]</span>
<span class="n">ltc_array_tags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ltc0&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc1&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc2&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc3&#39;</span><span class="p">]</span>

<span class="n">input_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;input0value&#39;</span><span class="p">,</span> <span class="s1">&#39;input1value&#39;</span><span class="p">,</span> <span class="s1">&#39;input2value&#39;</span><span class="p">,</span> <span class="s1">&#39;input3value&#39;</span><span class="p">,</span> <span class="s1">&#39;input4value&#39;</span><span class="p">,</span> <span class="s1">&#39;input5value&#39;</span><span class="p">,</span> <span class="s1">&#39;input6value&#39;</span><span class="p">,</span> <span class="s1">&#39;input7value&#39;</span><span class="p">]</span>

<span class="n">output_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;output0value&#39;</span><span class="p">,</span> <span class="s1">&#39;output1value&#39;</span><span class="p">,</span> <span class="s1">&#39;output2value&#39;</span><span class="p">,</span> <span class="s1">&#39;output3value&#39;</span><span class="p">,</span> <span class="s1">&#39;output4value&#39;</span><span class="p">,</span> <span class="s1">&#39;output5value&#39;</span><span class="p">,</span> <span class="s1">&#39;output6value&#39;</span><span class="p">,</span> <span class="s1">&#39;output7value&#39;</span><span class="p">]</span>

<span class="n">pid_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;pid0value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid1value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid2value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid3value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid4value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid5value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid6value&#39;</span><span class="p">,</span> <span class="s1">&#39;pid7value&#39;</span><span class="p">]</span>

<span class="n">relay_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;relay0value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay1value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay2value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay3value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay4value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay5value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay6value&#39;</span><span class="p">,</span> <span class="s1">&#39;relay7value&#39;</span><span class="p">]</span>

<span class="n">digital_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;digital0value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital1value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital2value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital3value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital4value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital5value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital6value&#39;</span><span class="p">,</span> <span class="s1">&#39;digital7value&#39;</span><span class="p">]</span>

<span class="n">ltc_array_values</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ltc3value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc4value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc5value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc6value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc7value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc8value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc9value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc10value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc11value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc12value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc13value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc14value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc15value&#39;</span><span class="p">,</span> <span class="s1">&#39;ltc16value&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>This next code block are the arrays that will hold our read/write values until they can be written to a text file.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Array Generation</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pidarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="c1">#input [mode, eng high, eng low]</span>
<span class="n">inputarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="c1">#output [mode,output_value,enable]</span>
<span class="n">outputarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="c1">#Relay [on/off]</span>
<span class="n">relayarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="n">digitalarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>
<span class="c1">#LTC [Sensor Type, Sensor Type, Sensor Type, Sensor Type]</span>
<span class="n">ltcarr</span> <span class="o">=</span> <span class="p">[</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span>
   <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">]</span>

<span class="n">inputarray</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">pidarray</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">outputvalue</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ltcvalue</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Below are two helper functions that will be used to read and write values to the PLC.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Helper Functions</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">read_settings</span><span class="p">(</span><span class="n">plcad</span><span class="p">,</span> <span class="n">array</span><span class="p">):</span>
   <span class="k">with</span> <span class="n">pycomm3</span><span class="o">.</span><span class="n">LogixDriver</span><span class="p">(</span><span class="n">plcad</span><span class="p">)</span> <span class="k">as</span> <span class="n">plc</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">plc</span><span class="o">.</span><span class="n">read_multiple</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">write_values</span><span class="p">(</span><span class="n">plcad</span><span class="p">,</span> <span class="n">tagarray</span><span class="p">,</span> <span class="n">valuearray</span><span class="p">):</span>
   <span class="k">with</span> <span class="n">pycomm3</span><span class="o">.</span><span class="n">LogixDriver</span><span class="p">(</span><span class="n">plcad</span><span class="p">)</span> <span class="k">as</span> <span class="n">plc</span><span class="p">:</span>
      <span class="n">plc</span><span class="o">.</span><span class="n">write_multiple</span><span class="p">(</span><span class="n">tagarray</span><span class="p">,</span> <span class="n">valuearray</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>This code block is the Main Loop of the program. The first section starts by reading the different tag values, held as custom structures in the PLC with the tag name associated in the array.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Main Loop</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
   <span class="n">inputs</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">input_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">input_num</span> <span class="ow">in</span> <span class="n">inputs</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">input_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">inputarr</span><span class="p">[</span><span class="n">input_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

   <span class="n">outputs</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">output_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">output_num</span> <span class="ow">in</span> <span class="n">outputs</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">output_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">outputarr</span><span class="p">[</span><span class="n">output_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">output_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

   <span class="n">pids</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">pid_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">pid_num</span> <span class="ow">in</span> <span class="n">pids</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">pid_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">pidarr</span><span class="p">[</span><span class="n">pid_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">pid_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

   <span class="n">relays</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">relay_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">relay_num</span> <span class="ow">in</span> <span class="n">relays</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">relay_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">relayarr</span><span class="p">[</span><span class="n">relay_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">relay_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

   <span class="n">digitals</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">digital_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">digital_num</span> <span class="ow">in</span> <span class="n">digitals</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">digital_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">digitalarr</span><span class="p">[</span><span class="n">digital_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">digital_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>

   <span class="n">ltcs</span> <span class="o">=</span> <span class="n">read_settings</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">ltc_array_tags</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">ltc_num</span> <span class="ow">in</span> <span class="n">ltcs</span><span class="p">:</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">ltc_num</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
         <span class="n">ltcarr</span><span class="p">[</span><span class="n">ltc_num</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">ltc_num</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>For ease of use with the existing comm.py program, we write the settings to the settings.txt file.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Main Loop</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">settingsfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;settings.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;input</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inputarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inputarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">inputarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">inputarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;output</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outputarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">outputarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;pid</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pidarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pidarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pidarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pidarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;relay</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">relayarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">relayarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">relayarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;digital</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">digitalarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">digitalarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">digitalarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;ltc</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltcarr</span><span class="p">)):</span>
      <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltcarr</span><span class="p">[</span><span class="n">i</span><span class="p">])):</span>
         <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ltcarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
         <span class="k">else</span><span class="p">:</span>
            <span class="n">settingsfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ltcarr</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">k</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="n">settingsfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Once this is done, we will then call the subprocess.call() function on our existing comm.py script. This function will not return until the script is done running.</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Main Loop</span><a class="headerlink" href="#id6" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">process</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="s1">&#39;comm.py&#39;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Below is the script being called by the subprocess.call() function. The script will read the settings.txt file and then write the values to the Teensy. After this, it will request the output information from the Teensy and write it to the values.txt file.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">comm.py</span><a class="headerlink" href="#id7" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">serial</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="c1">#ser = serial.Serial(&#39;/dev/ttyS0&#39;, 9600)</span>
<span class="n">ser</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">Serial</span><span class="p">(</span><span class="s1">&#39;/dev/ttyS1&#39;</span><span class="p">,</span> <span class="mi">115200</span><span class="p">,</span><span class="n">timeout</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">inputarray</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">pidarray</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">outputvalue</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ltcvalue</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;settings.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">data</span><span class="p">:</span>
   <span class="n">lines</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
   <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
      <span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">line</span><span class="p">))</span>
      <span class="n">ser</span><span class="o">.</span><span class="n">read_until</span><span class="p">(</span><span class="n">expected</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;recieved&#39;</span><span class="p">)</span>

<span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;Input Data&#39;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">inputarray</span><span class="p">:</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
   <span class="n">inputarray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>

<span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;Output Data&#39;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">outputvalue</span><span class="p">:</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
   <span class="n">outputvalue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>

<span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;PID Data&#39;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pidarray</span><span class="p">:</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
   <span class="n">pidarray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>

<span class="n">ser</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;LTC Data&#39;</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">ltcvalue</span><span class="p">:</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">ser</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
   <span class="n">ltcvalue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;values.txt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">d2</span><span class="p">:</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inputarray</span><span class="p">)):</span>
      <span class="n">d2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">inputarray</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputvalue</span><span class="p">)):</span>
      <span class="n">d2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">outputvalue</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pidarray</span><span class="p">)):</span>
      <span class="n">d2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pidarray</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltcvalue</span><span class="p">)):</span>
      <span class="n">d2</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ltcvalue</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">ser</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Once back in the main program, we will now open our values.txt and read the data into their proper arrays.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Main Loop</span><a class="headerlink" href="#id8" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">inputfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;values.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">inputarray</span><span class="p">)):</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">inputfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="n">inputarray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">outputvalue</span><span class="p">)):</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">inputfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="n">outputvalue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">pidarray</span><span class="p">)):</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">inputfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="n">pidarray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>
   <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ltcvalue</span><span class="p">)):</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">inputfile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
      <span class="n">ltcvalue</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span>

   <span class="n">inputfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The final piece is writing the values back to the PLC.</p>
<p>For the input array, it is the scaled values.</p>
<p>For the output array, it is the output percentage.</p>
<p>For the PID array, it is the output percentage of the PID.</p>
<p>For the relay array, it is the value of each relay (on/off).</p>
<p>For the digital array, it is the value of each digital output (on/off).</p>
<p>For the LTC Array, it is the returned value of each of the active channels, 0 otherwise.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Main Loop</span><a class="headerlink" href="#id9" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">input_array_tags</span><span class="p">,</span> <span class="n">inputarray</span><span class="p">)</span>
   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">output_array_tags</span><span class="p">,</span> <span class="n">outputvalue</span><span class="p">)</span>
   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">pid_array_tags</span><span class="p">,</span> <span class="n">pidarray</span><span class="p">)</span>
   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">relay_array_tags</span><span class="p">,</span> <span class="n">relayarr</span><span class="p">)</span>
   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">digital_array_tags</span><span class="p">,</span> <span class="n">digitalarr</span><span class="p">)</span>
   <span class="n">write_values</span><span class="p">(</span><span class="n">plc_address</span><span class="p">,</span> <span class="n">ltc_array_tags</span><span class="p">,</span> <span class="n">ltcarr</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="data-structures">
<h2>Data Structures<a class="headerlink" href="#data-structures" title="Permalink to this headline">¶</a></h2>
<p>Below are some examples of how to create structures to send to the PLC, which have to match the structure of the PLC. The user can use these to make</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Structure Examples</span><a class="headerlink" href="#id10" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">input_struct</span><span class="p">(</span><span class="n">inputnum</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span> <span class="n">enghigh</span><span class="p">,</span> <span class="n">englow</span><span class="p">):</span>

   <span class="n">input_struct</span> <span class="o">=</span><span class="p">{</span>
      <span class="s1">&#39;Input&#39;</span> <span class="p">:</span> <span class="n">inputnum</span><span class="p">,</span>
      <span class="s1">&#39;Mode&#39;</span> <span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
      <span class="s1">&#39;EngHigh&#39;</span> <span class="p">:</span> <span class="n">enghigh</span><span class="p">,</span>
      <span class="s1">&#39;EngLow&#39;</span> <span class="p">:</span> <span class="n">englow</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">input_struct</span>

<span class="k">def</span> <span class="nf">output_struct</span><span class="p">(</span><span class="n">outputnum</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span> <span class="n">outputvalue</span><span class="p">,</span><span class="n">enable</span><span class="p">):</span>
   <span class="n">output_struct</span> <span class="o">=</span><span class="p">{</span>
      <span class="s1">&#39;Output&#39;</span> <span class="p">:</span> <span class="n">outputnum</span><span class="p">,</span>
      <span class="s1">&#39;Mode&#39;</span> <span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
      <span class="s1">&#39;OutputValue&#39;</span> <span class="p">:</span> <span class="n">outputvalue</span><span class="p">,</span>
      <span class="s1">&#39;Enable&#39;</span> <span class="p">:</span> <span class="n">enable</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">output_struct</span>

<span class="k">def</span> <span class="nf">pid_struct</span><span class="p">(</span><span class="n">pidnum</span><span class="p">,</span><span class="n">kp</span><span class="p">,</span><span class="n">ki</span><span class="p">,</span><span class="n">kd</span><span class="p">,</span><span class="n">minout</span><span class="p">,</span><span class="n">maxout</span><span class="p">,</span><span class="n">minin</span><span class="p">,</span><span class="n">maxin</span><span class="p">,</span><span class="n">sampletime</span><span class="p">,</span><span class="n">setpoint</span><span class="p">,</span><span class="n">mode</span><span class="p">,</span><span class="n">enable</span><span class="p">):</span>
   <span class="n">pid_struct</span> <span class="o">=</span><span class="p">{</span>
      <span class="s1">&#39;PID&#39;</span> <span class="p">:</span> <span class="n">pidnum</span><span class="p">,</span>
      <span class="s1">&#39;Kp&#39;</span> <span class="p">:</span> <span class="n">kp</span><span class="p">,</span>
      <span class="s1">&#39;Ki&#39;</span> <span class="p">:</span> <span class="n">ki</span><span class="p">,</span>
      <span class="s1">&#39;Kd&#39;</span> <span class="p">:</span> <span class="n">kd</span><span class="p">,</span>
      <span class="s1">&#39;MinOut&#39;</span> <span class="p">:</span> <span class="n">minout</span><span class="p">,</span>
      <span class="s1">&#39;MaxOut&#39;</span> <span class="p">:</span> <span class="n">maxout</span><span class="p">,</span>
      <span class="s1">&#39;MinIn&#39;</span> <span class="p">:</span> <span class="n">minin</span><span class="p">,</span>
      <span class="s1">&#39;MaxIn&#39;</span> <span class="p">:</span> <span class="n">maxin</span><span class="p">,</span>
      <span class="s1">&#39;SampleTime&#39;</span> <span class="p">:</span> <span class="n">sampletime</span><span class="p">,</span>
      <span class="s1">&#39;SetPoint&#39;</span> <span class="p">:</span> <span class="n">setpoint</span><span class="p">,</span>
      <span class="s1">&#39;Mode&#39;</span> <span class="p">:</span> <span class="n">mode</span><span class="p">,</span>
      <span class="s1">&#39;Enable&#39;</span> <span class="p">:</span> <span class="n">enable</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">pid_struct</span>

<span class="k">def</span> <span class="nf">ltc_struct</span><span class="p">(</span><span class="n">banknum</span><span class="p">,</span><span class="n">sensortype0</span><span class="p">,</span><span class="n">sensortype1</span><span class="p">,</span><span class="n">sensortype2</span><span class="p">,</span><span class="n">sensortype3</span><span class="p">):</span>
   <span class="n">ltc_struct</span> <span class="o">=</span><span class="p">{</span>
      <span class="s1">&#39;Bank&#39;</span> <span class="p">:</span> <span class="n">banknum</span><span class="p">,</span>
      <span class="s1">&#39;Sensor0&#39;</span> <span class="p">:</span> <span class="n">sensortype0</span><span class="p">,</span>
      <span class="s1">&#39;Sensor1&#39;</span> <span class="p">:</span> <span class="n">sensortype1</span><span class="p">,</span>
      <span class="s1">&#39;Sensor2&#39;</span> <span class="p">:</span> <span class="n">sensortype2</span><span class="p">,</span>
      <span class="s1">&#39;Sensor3&#39;</span> <span class="p">:</span> <span class="n">sensortype3</span>
   <span class="p">}</span>
   <span class="k">return</span> <span class="n">ltc_struct</span>

<span class="n">input0</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input1</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input2</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input3</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input4</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input5</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input6</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">input7</span> <span class="o">=</span> <span class="n">input_struct</span><span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="n">output0</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output1</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output2</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output3</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output4</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output5</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output6</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">output7</span> <span class="o">=</span> <span class="n">output_struct</span><span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="n">pid0</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid1</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid2</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid3</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid4</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid5</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid6</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">pid7</span> <span class="o">=</span> <span class="n">pid_struct</span><span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>

<span class="n">relay0</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay0&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay1&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay2&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay3</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay3&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay4</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay4&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay5</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay5&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay6</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay6&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">relay7</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;relay7&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="n">digital0</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital0&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital1</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital1&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital2</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital2&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital3</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital3&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital4</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital4&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital5</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital5&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital6</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital6&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
<span class="n">digital7</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;digital7&#39;</span> <span class="p">:</span> <span class="mi">0</span><span class="p">}</span>

<span class="n">ltc0</span> <span class="o">=</span> <span class="n">ltc_struct</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ltc1</span> <span class="o">=</span> <span class="n">ltc_struct</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ltc2</span> <span class="o">=</span> <span class="n">ltc_struct</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ltc3</span> <span class="o">=</span> <span class="n">ltc_struct</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../schematics/relaycircuit.html" class="btn btn-neutral float-left" title="Relay and Digital Out Circuits" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../API_Examples/settings_text.html" class="btn btn-neutral float-right" title="How To Format Data for UART" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chris Heyden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>