<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Output Circuit &mdash; Loop Controller and Remote I/O 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Power Circuit" href="powercircuit.html" />
    <link rel="prev" title="LTC2984 Circuit" href="ltc2984circuit.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Loop Controller and Remote I/O
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Schematics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="inputcircuit.html">Input Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="ltc2984circuit.html">LTC2984 Circuit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Output Circuit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#theory-of-operation">Theory of Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resistor-capacitor-filter">Resistor-Capacitor Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vdc-or-0-5vdc-operation">0-10VDC or 0-5VDC Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ma-operation">4-20mA Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parts">Parts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="powercircuit.html">Power Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="relaycircuit.html">Relay and Digital Out Circuits</a></li>
</ul>
<p class="caption"><span class="caption-text">Schematics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="inputcircuit.html">Input Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="ltc2984circuit.html">LTC2984 Circuit</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Output Circuit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#theory-of-operation">Theory of Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resistor-capacitor-filter">Resistor-Capacitor Filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vdc-or-0-5vdc-operation">0-10VDC or 0-5VDC Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ma-operation">4-20mA Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parts">Parts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="powercircuit.html">Power Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="relaycircuit.html">Relay and Digital Out Circuits</a></li>
</ul>
<p class="caption"><span class="caption-text">API Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/input_ex.html">Input Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/ltc_ex.html">LTC2984 Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/output_ex.html">Output Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/pid_ex.html">PID Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/shift_ex.html">Shift Register Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_Examples/uart_ex.html">UART Object Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API_References/inputob.html">Input Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/ltc.html">LTC2984</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/outputob.html">Output Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/pidob.html">PID Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/shift.html">Shift Register</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/uart.html">Uart Object</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Loop Controller and Remote I/O</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Output Circuit</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/schematics/outputcircuit.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="output-circuit">
<h1>Output Circuit<a class="headerlink" href="#output-circuit" title="Permalink to this headline">¶</a></h1>
<div class="section" id="theory-of-operation">
<h2>Theory of Operation<a class="headerlink" href="#theory-of-operation" title="Permalink to this headline">¶</a></h2>
<p>The Pulse Width Modulated (PWM) has a peak of 3.3VDC. The PWM signal first goes through a Resistor-Capacitor (RC) circuit to help smooth out ripples. This filtered signal is fed into the LM358, and using a Non-Inverting Amplifier circuit with a gain of 3, the output voltage is amplified to the range appropriate for either 0-10VDC or for the 4-20mA circuit.</p>
</div>
<div class="section" id="resistor-capacitor-filter">
<h2>Resistor-Capacitor Filter<a class="headerlink" href="#resistor-capacitor-filter" title="Permalink to this headline">¶</a></h2>
<p>The resistor selected was <span class="math notranslate nohighlight">\(3.3k{\Omega}\)</span> and the capcitor selected was 4.7uF. This gives a <span class="math notranslate nohighlight">\({\tau}\)</span> of around 15.51ms and 77.55ms for <span class="math notranslate nohighlight">\(5{\tau}\)</span>.</p>
</div>
<div class="section" id="vdc-or-0-5vdc-operation">
<h2>0-10VDC or 0-5VDC Operation<a class="headerlink" href="#vdc-or-0-5vdc-operation" title="Permalink to this headline">¶</a></h2>
<p>The scaled value from the Non-Inverting Amplifier is connected to a relay with the attached VoltageMode tag. When turned on, it will directly pass a 0-10VDC signal or 0-5VDC signal directly off of the amplifier.</p>
</div>
<div class="section" id="ma-operation">
<h2>4-20mA Operation<a class="headerlink" href="#ma-operation" title="Permalink to this headline">¶</a></h2>
<p>When operating in 4-20mA mode, both a relay and a dual package NPN/PNP BJT transistor are turned on. The dual package BJT acts simply as a switch that controls the input path to the positive terminal for the 4-20mA amplifier.</p>
<p>The voltage produced from the Non-Inverting Amplifier goes through a simple voltage divider that halves the reference voltage into the positive terminal of the Op-Amp. This scaling was selected with consideration to the output ceiling of the amplifier.</p>
<p>If the range of 0-10VDC was used, and the current loop used a <span class="math notranslate nohighlight">\(500{\Omega}\)</span> resistor for it’s current sensing, the voltage output required would be 20VDC which leaves little room for the 4-20mA amplifier to operate even though the amplifier is supplied with 24VDC.
The output signal then comes back to the Current_Return tag, which gets sunk through the <span class="math notranslate nohighlight">\(250{\Omega}\)</span> resistor.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><span class="math notranslate nohighlight">\(249{\Omega}\)</span> is the actual value of the current sensing resistor for the current loop to account for resistances in the circuit.</p>
</div>
<p>With the voltage now scaled between 0-5VDC, the amplifier will try to adjust the output voltage to match the input voltage, which will force the voltage at the negative terminal to be the same as the positive terminal.</p>
<p>If the voltage at the negative terminal is the scaled 5VDC, then the current through the <span class="math notranslate nohighlight">\(250{\Omega}\)</span> resistor will be <span class="math notranslate nohighlight">\(\frac{5}{250} = 20mA\)</span>. This means that an input of 1VDC will result in a 4mA output.</p>
</div>
<div class="section" id="parts">
<h2>Parts<a class="headerlink" href="#parts" title="Permalink to this headline">¶</a></h2>
<p><a class="reference download internal" download="" href="../_downloads/a2245261a664c19d69a8e195313a0818/LM358.pdf"><code class="xref download docutils literal notranslate"><span class="pre">LM358QT</span> <span class="pre">Op</span> <span class="pre">Amp</span></code></a></p>
<p><a class="reference download internal" download="" href="../_downloads/759c608f8fe2cbab7b420fe99aab2687/CPC1002N.pdf"><code class="xref download docutils literal notranslate"><span class="pre">CPC1002N</span> <span class="pre">Relay</span></code></a></p>
<p><a class="reference download internal" download="" href="../_downloads/8d037292d6c4cbb719601fb2a4b2f8b5/BCP846.pdf"><code class="xref download docutils literal notranslate"><span class="pre">BCP846</span> <span class="pre">NPN/PNP</span> <span class="pre">Dual</span> <span class="pre">Package</span> <span class="pre">BJT</span></code></a></p>
<a class="reference internal image-reference" href="../_images/output_cir.jpg"><img alt="Ouput Circuit" class="align-center" src="../_images/output_cir.jpg" style="width: 500px;" /></a>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ltc2984circuit.html" class="btn btn-neutral float-left" title="LTC2984 Circuit" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="powercircuit.html" class="btn btn-neutral float-right" title="Power Circuit" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chris Heyden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>