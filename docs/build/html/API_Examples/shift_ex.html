<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Shift Register Object Usage &mdash; Loop Controller and Remote I/O 0.0.1 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="UART Object Usage" href="uart_ex.html" />
    <link rel="prev" title="LTC2984 Object Usage" href="ltc_ex.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Loop Controller and Remote I/O
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Schematics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../schematics/inputcircuit.html">Input Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/outputcircuit.html">Output Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/ltc2984circuit.html">LTC2984 Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/powercircuit.html">Power Circuit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schematics/relaycircuit.html">Relay and Digital Out Circuits</a></li>
</ul>
<p class="caption"><span class="caption-text">Onion Omega Function</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Onion_Omega/Omega_Code.html">Code on Onion Omega</a></li>
</ul>
<p class="caption"><span class="caption-text">API Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="input_ex.html">Input Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="output_ex.html">Output Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="pid_ex.html">PID Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="ltc_ex.html">LTC2984 Object Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Shift Register Object Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#shift-object-purpose">Shift Object Purpose</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-examples">Code Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="uart_ex.html">UART Object Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings_handler.html">Setting Handler</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings_text.html">How To Format Data for UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="in_pid_out.html">Putting It All Together</a></li>
</ul>
<p class="caption"><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API_References/inputob.html">Input Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/outputob.html">Output Conditioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/pidob.html">PID Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/ltc.html">LTC2984</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/shift.html">Shift Register</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/uart.html">Uart Object</a></li>
<li class="toctree-l1"><a class="reference internal" href="../API_References/setting_ob.html">Settings Handler</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Loop Controller and Remote I/O</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Shift Register Object Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/API_Examples/shift_ex.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="shift-register-object-usage">
<h1>Shift Register Object Usage<a class="headerlink" href="#shift-register-object-usage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="shift-object-purpose">
<h2>Shift Object Purpose<a class="headerlink" href="#shift-object-purpose" title="Permalink to this headline">¶</a></h2>
<p>The purpose of the shift object is to allow for easy shifting of data into up to 2 cascaded shift registers. The shift object is specifically setup for the CD74HC595 and tested exclusively with this model. Functions may need to be altered to allow for other shift registers.</p>
<div class="section" id="code-examples">
<h3>Code Examples<a class="headerlink" href="#code-examples" title="Permalink to this headline">¶</a></h3>
<p>The first examples shows how to initialize the object. The user must provide the inputs for the Storage Register Clock (RCLK), Output Enable (<span class="math notranslate nohighlight">\(\bar{OE}\)</span>), Shift Register Clock (SRCLK), Serial Data Input (SER), and the number of outputs (8 or 16).</p>
<p>The overriding clear (<span class="math notranslate nohighlight">\(\bar{SRCLR}\)</span>) pin is assumed to be connected to VCC.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Example initilization of object</span><a class="headerlink" href="#id1" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">board</span>
<span class="kn">import</span> <span class="nn">digitalio</span>
<span class="kn">import</span> <span class="nn">shift_object</span>

<span class="c1">#Digital Selection Shift Register</span>
<span class="n">digital_store</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D34</span><span class="p">)</span>
<span class="n">digital_enable</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D35</span><span class="p">)</span>
<span class="n">digital_shift</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D33</span><span class="p">)</span>
<span class="n">digital_data</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">DigitalInOut</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">D36</span><span class="p">)</span>

<span class="c1">#Declare Pin Direction</span>
<span class="n">digital_store</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">OUTPUT</span>
<span class="n">digital_enable</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">OUTPUT</span>
<span class="n">digital_shift</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">OUTPUT</span>
<span class="n">digital_data</span><span class="o">.</span><span class="n">direction</span> <span class="o">=</span> <span class="n">digitalio</span><span class="o">.</span><span class="n">Direction</span><span class="o">.</span><span class="n">OUTPUT</span>

<span class="c1">#Ensure the shift register starts out in High Impedance mode</span>
<span class="n">digital_enable</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Initialize the input object</span>
<span class="n">digital_shiftreg</span> <span class="o">=</span> <span class="n">shift_object</span><span class="o">.</span><span class="n">shiftregister</span><span class="p">(</span><span class="n">digital_store</span><span class="p">,</span> <span class="n">digital_enable</span><span class="p">,</span> <span class="n">digital_shift</span><span class="p">,</span> <span class="n">digital_data</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The shift register must be enabled through the input_container.enable() function. This function will set the <span class="math notranslate nohighlight">\(\bar{OE}\)</span> pin to low.</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Using the declared object from above.</span><a class="headerlink" href="#id2" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Enable the shift register</span>
<span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>The shift register object can shift data while disabled, or enabled. If disabled, the outputs will not reflect the value of the shift register until the shift register is enabled again.</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">Using the declared object from above.</span><a class="headerlink" href="#id3" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Disable the shiftregister</span>
<span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">disable</span><span class="p">()</span>

<span class="c1">#Shift data into the shift register</span>
<span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mh">0xFF</span><span class="p">)</span> <span class="c1">#Turns all outputs on</span>

<span class="c1">#Enable the shift register</span>
<span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">enable</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>There is also a function to zero the shift register, which will set all outputs to low.</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">Using the declared object from above.</span><a class="headerlink" href="#id4" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Zero the shift register</span>
<span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">zero</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Finally, there is a function that will return the last value passed to the shift register.</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">Using the declared object from above.</span><a class="headerlink" href="#id5" title="Permalink to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#Get the last value passed to the shift register</span>
<span class="n">last_value</span> <span class="o">=</span> <span class="n">digital_shiftreg</span><span class="o">.</span><span class="n">data</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ltc_ex.html" class="btn btn-neutral float-left" title="LTC2984 Object Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="uart_ex.html" class="btn btn-neutral float-right" title="UART Object Usage" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Chris Heyden.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>